<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="bayesactR">
<title>Setting up and running simulations • bayesactR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Setting up and running simulations">
<meta property="og:description" content="bayesactR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bayesactR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9003</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/bayesactR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/output.html">Simulation results</a>
    <a class="dropdown-item" href="../articles/run_elements.html">Setting up and running simulations</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Setting up and running simulations</h1>
            
      
      
      <div class="d-none name"><code>run_elements.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ahcombs.github.io/bayesactR/">bayesactR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: actdata</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ahcombs.github.io/actdata/" class="external-link">actdata</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="setting-up-and-running-simulations">Setting up and running simulations<a class="anchor" aria-label="anchor" href="#setting-up-and-running-simulations"></a>
</h2>
<p>There are three stages to running BayesACT simulations: a setup stage, a run stage, and an analysis stage. The setup and run stages are described on this page. For more information on output and analysis, visit the <a href="https://ahcombs.github.io/bayesactR/articles/output.html">results information page</a>.</p>
<div class="section level3">
<h3 id="setup-creating-input-files">Setup: Creating input files<a class="anchor" aria-label="anchor" href="#setup-creating-input-files"></a>
</h3>
<p>BayesACT needs some information about actors, their relationships with one another, and the structure of their interaction. These parameters are provided to the C package via specially formatted text files. These files can be created by hand (and many examples are provided in the BayesACT C package and documentation), however, bayesactR also provides functions that generate them automatically. Automatic generation of the required input files is easier when running batches of simulations, more reproducible, and less prone to errors than manual creation.</p>
<p>The information needed to generate the proper input files can be divided into three types: information about individual actors, information about the actors’ initial relationships with one another, and information about the kinds of events that can occur in the simulation. Within bayesactR, this information is structured in a way that parallels that often used in social network analysis and agent based modeling. Information specific to individual actors is stored in a data frame structured like a nodelist. Information about relationships between actors is stored in a data frame structured like an edgelist. Finally, information about events is stored in a sequentially ordered data frame, and this is information is conceptually similar to algorithms that define action in agent-based models.</p>
<div class="section level4">
<h4 id="actor-nodelist">Actor nodelist<a class="anchor" aria-label="anchor" href="#actor-nodelist"></a>
</h4>
<p>The actor nodelist contains information that is specific to each actor in a simulation. Specifically, we need to know which sentiment dictionaries and equations represent each actor’s understanding of the world, and (optionally) we can define parameter values that control how they manage uncertainty. bayesactR pairs with <a href="ahcombs.github.io/actdata/">actdata</a> to make specifying dictionaries and equations easy.</p>
<p>The recommended way to create the nodelist is to generate it using a pair of provided functions <code><a href="../reference/blank_nodelist.html">blank_nodelist()</a></code> and <code><a href="../reference/add_actor.html">add_actor()</a></code>.</p>
<div class="section level5">
<h5 id="dictionaries">Dictionaries<a class="anchor" aria-label="anchor" href="#dictionaries"></a>
</h5>
<p>Each actor needs four dictionaries representing (a) meanings of identities they assign to themselves, (b) meanings they assign to behaviors, (c) meanings of identities they assign to their interaction partners, and (4) meanings assigned to modifiers and emotions. These dictionaries can be provided in one of three ways (mixing and matching is allowed):</p>
<ol style="list-style-type: decimal">
<li>
<strong>Using actdata data set keys.</strong> If you are working with publicly available ACT sentiment dictionaries and equation sets, you can specify dictionaries using keywords from the <a href="https://ahcombs.github.io/actdata/" class="external-link">actdata package</a>. This package is a repository for standardized version of many publicly available ACT sentiment dictionaries and equation data sets, and it and bayesactR were developed to complement each other. If using dictionaries and/or equations from <code>actdata</code>, just provide the applicable keyword as the <code>dict</code> argument. If you wish to use different dictionaries for the four components, provide four dictionary keys in a list (eg, c(“uga2015”, “nc1978”, “uga2015”, “uga2015”)). To see information about available data sets and gender subsets, see the actdata help pages on <a href="https://ahcombs.github.io/actdata/articles/dictionaries.html" class="external-link">dictionaries</a> or call <code><a href="https://ahcombs.github.io/actdata/reference/dict_info.html" class="external-link">actdata::dict_info()</a></code>.</li>
<li>
<strong>Using data frame objects.</strong> Dictionaries can be provided as data frame objects. This is particularly useful when you wish to use a subset of terms from a public dictionary–for example, perhaps you only want your agents to be able to take a limited set of behaviors, or identities from just one institution, rather than having access to the whole list. The <code><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">actdata::epa_subset()</a></code> function within <code>actdata</code> makes creating subsets from public data straightforward. You can also provide your own data as a properly formatted data frame–see <code><a href="https://ahcombs.github.io/actdata/reference/format_for_bayesact.html" class="external-link">actdata::format_for_bayesact()</a></code>, which checks and fixes this formatting for you. You can either provide a single data frame with a column titled “component” that is used to determine which rows apply to which of the four categories above, or you can provide a list of four data frames in the order above (use <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> rather than <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> to create this list).</li>
<li>
<strong>Using file paths.</strong> Finally, you may provide a filepath to the dictionary files. These must already be properly formatted for BayesACT–bayesactR does not do any checking or reformatting of them; it simply passes the files directly to the C code.</li>
</ol>
<p>Below is an example showing the syntax for specifying dictionaries using data set keys. Further down the page there is an example using data frame objects that are subsets of public dictionaries.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ahcombs.github.io/bayesactR/">bayesactR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># blank_nodelist() creates an empty data frame with the correct column labels</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blank_nodelist.html">blank_nodelist</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add_actor() appends a line representing an actor to this data frame. If dictionaries, equations, or dict/eqn stats or genders are not specified, they will revert to defaults. </span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Ingrid"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="st">"germany2007"</span>, </span>
<span>                      eqns <span class="op">=</span> <span class="st">"germany2007"</span>, eqns_gender <span class="op">=</span> <span class="st">"av"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># To add another actor, use add_actor() again. Different parameter values can be specified for each actor.</span></span>
<span><span class="co"># For Felix we use the actdata keyword for the Germany 2007 sentiment dictionary and equations, and we use the values collected from men.</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Felix"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="st">"germany2007"</span>, </span>
<span>                      dict_gender <span class="op">=</span> <span class="st">"male"</span>, </span>
<span>                      eqns <span class="op">=</span> <span class="st">"germany2007"</span>, eqns_gender <span class="op">=</span> <span class="st">"av"</span>, </span>
<span>                      alphas <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">nodelist</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="45%">
<col width="9%">
<col width="10%">
<col width="10%">
<col width="10%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">dict</th>
<th align="left">dict_stat</th>
<th align="left">dict_gender</th>
<th align="left">eqns</th>
<th align="left">eqns_gender</th>
<th align="left">alphas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Ingrid</td>
<td align="left">germany2007, germany2007, germany2007, germany2007</td>
<td align="left">mean</td>
<td align="left">average</td>
<td align="left">germany2007</td>
<td align="left">av</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Felix</td>
<td align="left">germany2007, germany2007, germany2007, germany2007</td>
<td align="left">mean</td>
<td align="left">male</td>
<td align="left">germany2007</td>
<td align="left">av</td>
<td align="left">1</td>
</tr>
</tbody>
</table>
<div class="section level6">
<h6 id="a-note-about-dictionaries-and-cross-cultural-interaction">A note about dictionaries and cross-cultural interaction<a class="anchor" aria-label="anchor" href="#a-note-about-dictionaries-and-cross-cultural-interaction"></a>
</h6>
<p>When two actors are based in the same culture, it is reasonable to assign them the same set of dictionaries and equations. When two actors are from different cultures, we may want to instead assign them different dictionaries and equations. This is possible in BayesACT, but there is a caveat: the dictionaries for all actors (except for modifier dictionaries) must contain the same sets of words. If the set of terms differs between dictionaries, one agent will not be able to comprehend the action performed or identity assigned by the other, and BayesACT will crash. The recommended workaround is simply to subset each of the desired dictionaries so that each contains only the terms that are present in all others. The <code><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">actdata::epa_subset()</a></code> function in <code>actdata</code> makes this kind of manipulation reasonably straightforward.</p>
</div>
</div>
<div class="section level5">
<h5 id="equations">Equations<a class="anchor" aria-label="anchor" href="#equations"></a>
</h5>
<p>In addition to dictionaries, each actor also needs two sets of equation coefficients: 1. <strong>Impression equation coefficients</strong>, which determine ideal elements of A-B-O(actor-behavior-object) events. In actdata, these are referred to as type “impressionabo”. 2. <strong>Emotion equation coefficients</strong>, which estimate emotional reactions to events. In actdata, these are referred to as type “emotionid”.</p>
<p>Similarly to dictionaries, these equations can be provided using actdata keys, data frames, or filepaths. If using an actdata key, also pay attention to the <code>eqns_gender</code> argument of <code><a href="../reference/add_actor.html">add_actor()</a></code>–not all equation type-gender combinations are available. Call <code><a href="https://ahcombs.github.io/actdata/reference/eqn_info.html" class="external-link">eqn_info()</a></code> to see what combinations are valid.</p>
<p>Call <code>?add_actor()</code> for more details on creating the nodelist.</p>
</div>
<div class="section level5">
<h5 id="other-parameters">Other parameters<a class="anchor" aria-label="anchor" href="#other-parameters"></a>
</h5>
<p>The nodelist is also where optional parameters that control how actors manage uncertainty and strange situations can be adjusted. These parameters are alpha, beta, and delta. See <code>?add_actor()</code> for more details.</p>
</div>
<div class="section level5">
<h5 id="an-example">An example:<a class="anchor" aria-label="anchor" href="#an-example"></a>
</h5>
<p>In this example, we say that Sally is American and so uses the meanings in one of the recent U.S. dictionaries. We say Reem is Egyptian and uses meanings from Egyptian dictionaries. We subset both the U.S. and Egypt dictionaries to contain the same set of identities and behaviors.</p>
<p>BayesACT takes into account uncertainty around identity meanings. This can be represented by an arbitrary constant around mean values or standard deviation or covariance information calculated from EPA measurement data. Most older public datasets contain only mean values, but more recent data collections (2015 or newer) also contain standard deviation and covariance information. In this example we use two recent datasets and we perform the BayesACT simulation using the covariance information they contain.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">egypt_identity</span> <span class="op">&lt;-</span> <span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"egypt2015"</span>, </span>
<span>                                      component <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>                                      gender <span class="op">=</span> <span class="st">"average"</span>, </span>
<span>                                      stat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"cov"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"usfullsurveyor2015"</span>, </span>
<span>                                       component <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>                                       gender <span class="op">=</span> <span class="st">"average"</span><span class="op">)</span>, </span>
<span>                   by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">us_identity</span> <span class="op">&lt;-</span> <span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"usfullsurveyor2015"</span>, </span>
<span>                                   component <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>                                   gender <span class="op">=</span> <span class="st">"average"</span>, </span>
<span>                                   stat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"cov"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"egypt2015"</span>, </span>
<span>                                       component <span class="op">=</span> <span class="st">"identity"</span>, </span>
<span>                                       gender <span class="op">=</span> <span class="st">"average"</span><span class="op">)</span>, </span>
<span>                   by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">egypt_behavior</span> <span class="op">&lt;-</span> <span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"egypt2015"</span>, </span>
<span>                                      component <span class="op">=</span> <span class="st">"behavior"</span>, </span>
<span>                                      gender <span class="op">=</span> <span class="st">"average"</span>, </span>
<span>                                      stat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"cov"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"usfullsurveyor2015"</span>, </span>
<span>                                       component <span class="op">=</span> <span class="st">"behavior"</span>, </span>
<span>                                       gender <span class="op">=</span> <span class="st">"average"</span><span class="op">)</span>, </span>
<span>                   by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">us_behavior</span> <span class="op">&lt;-</span> <span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"usfullsurveyor2015"</span>, </span>
<span>                                   component <span class="op">=</span> <span class="st">"behavior"</span>, </span>
<span>                                   gender <span class="op">=</span> <span class="st">"average"</span>, </span>
<span>                                   stat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"cov"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="fu">actdata</span><span class="fu">::</span><span class="fu"><a href="https://ahcombs.github.io/actdata/reference/epa_subset.html" class="external-link">epa_subset</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="st">"egypt2015"</span>, </span>
<span>                                       component <span class="op">=</span> <span class="st">"behavior"</span>, </span>
<span>                                       gender <span class="op">=</span> <span class="st">"average"</span><span class="op">)</span>, </span>
<span>                   by <span class="op">=</span> <span class="st">"term"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">egypt_identity</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 19</span></span></span>
<span><span class="co">#&gt;   term     compo…¹ dataset context year  gender instc…²     E     P     A cov_EE</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> abortio… identi… egypt2… Egypt   2015  avera… 11 000… -<span style="color: #BB0000;">1.89</span> -<span style="color: #BB0000;">0.58</span>  0.88   5.99</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> adolesc… identi… egypt2… Egypt   2015  avera… 11 100…  0.17  0.06  0.6    4.45</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> adult    identi… egypt2… Egypt   2015  avera… 11 100…  1.37  0.94  0.02   3.31</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> adulter… identi… egypt2… Egypt   2015  avera… 10 000… -<span style="color: #BB0000;">2.99</span> -<span style="color: #BB0000;">1.88</span>  2.26   4.26</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> adulter… identi… egypt2… Egypt   2015  avera… 01 000… -<span style="color: #BB0000;">3.44</span> -<span style="color: #BB0000;">2.19</span>  2.14   2.3 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> air_for… identi… egypt2… Egypt   2015  avera… 11 000…  2.17  1.95  0.14   3.51</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 8 more variables: cov_EP &lt;dbl&gt;, cov_EA &lt;dbl&gt;, cov_PE &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cov_PP &lt;dbl&gt;, cov_PA &lt;dbl&gt;, cov_AE &lt;dbl&gt;, cov_AP &lt;dbl&gt;, cov_AA &lt;dbl&gt;, and</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   abbreviated variable names ¹​component, ²​instcodes</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ Use `colnames()` to see all variable names</span></span></span>
<span></span>
<span><span class="co"># We can provide these data frames by passing a list to the dict argument. </span></span>
<span><span class="co"># The order is c(agent_identity, agent_behavior, object_identity, agent_emotion).</span></span>
<span><span class="co"># Modifier term sets do not have to match, so instead of going to the trouble of creating modifier subsets, </span></span>
<span><span class="co"># here we pass the actdata dataset key for the modifier slot instead.</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blank_nodelist.html">blank_nodelist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Sally"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">us_identity</span>, <span class="va">us_behavior</span>, <span class="va">us_identity</span>, <span class="st">"usfullsurveyor2015"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Reem also uses the Egyptian equations (the default, which Sally uses, is us2010).</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Reem"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">egypt_identity</span>, <span class="va">egypt_behavior</span>, <span class="va">egypt_identity</span>, <span class="st">"egypt2015"</span><span class="op">)</span>, </span>
<span>                      eqns <span class="op">=</span> <span class="st">"egypt2014"</span>, eqns_gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"av"</span>, <span class="st">"f"</span><span class="op">)</span>, </span>
<span>                      alphas <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="interaction-edgelist">Interaction edgelist<a class="anchor" aria-label="anchor" href="#interaction-edgelist"></a>
</h4>
<p>The interaction edgelist contains information that defines relationships between actors–in particular, the identities they will ascribe to themselves and their alter at the outset of an interaction. The process for creating this edgelist is very similar to that for creating the nodelist–call <code>?add_interaction()</code> for more details.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># creates a blank data frame with the correct column names</span></span>
<span><span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blank_edgelist.html">blank_edgelist</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Note that interactions are directed--how one actor views herself does not necessary match how her partner views her. </span></span>
<span><span class="co"># The focal actor is referred to as the agent, and the partner is referred to as the object or client. </span></span>
<span><span class="co"># Sally views herself as a teacher and Reem as a student when they interact.</span></span>
<span><span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_interaction.html">add_interaction</a></span><span class="op">(</span><span class="va">edgelist</span>, </span>
<span>                            agent <span class="op">=</span> <span class="st">"Sally"</span>, object <span class="op">=</span> <span class="st">"Reem"</span>, </span>
<span>                            agent_ident <span class="op">=</span> <span class="st">"teacher"</span>, agent_ident_prob <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                            object_ident <span class="op">=</span> <span class="st">"student"</span>, object_ident_prob <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># When she interacts with Sally, Reem usually sees herself as a student (p = .9) but sometimes as a genius (p = .1). She usually sees Sally as a teacher (p - .85) but occasionally as a bore (p = .15). </span></span>
<span><span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_interaction.html">add_interaction</a></span><span class="op">(</span><span class="va">edgelist</span>, </span>
<span>                            agent <span class="op">=</span> <span class="st">"Reem"</span>, object <span class="op">=</span> <span class="st">"Sally"</span>, </span>
<span>                            agent_ident <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"student"</span>, <span class="st">"genius"</span><span class="op">)</span>, agent_ident_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.9</span>, <span class="fl">.1</span><span class="op">)</span>, </span>
<span>                            object_ident <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"teacher"</span>, <span class="st">"bore"</span><span class="op">)</span>, object_ident_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.85</span>, <span class="fl">.15</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">edgelist</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">agent</th>
<th align="left">object</th>
<th align="left">agent_ident</th>
<th align="left">agent_ident_prob</th>
<th align="left">object_ident</th>
<th align="left">object_ident_prob</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">Reem</td>
<td align="left">teacher</td>
<td align="left">1</td>
<td align="left">student</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">Sally</td>
<td align="left">student, genius</td>
<td align="left">0.9, 0.1</td>
<td align="left">teacher, bore</td>
<td align="left">0.85, 0.15</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="event-list">Event list<a class="anchor" aria-label="anchor" href="#event-list"></a>
</h4>
<p>The last piece of input information is the event list. The event list is a data frame that has one line per turn in the simulation and defines who can act and what they can do on that turn.</p>
<p>bayesactR provides a function, <code><a href="../reference/basic_event_df.html">basic_event_df()</a></code> for generating relatively simple events files in which actors take either the BayesACT-optimal action, the interact-optimal action, or a specific action from the dictionary on each of their turns. Actors must switch off on some regular interval.</p>
<p>It is possible to use more complex events files (see the BayesACT C package documentation), but this simple structure should suffice for many applications. It can also be used as a base from which to build more complex specifications.</p>
<p>The contents of this file are more cryptic than the nodelist and edgelist. Each row represents one turn in the simulation. On each turn, one or both actors will have an entry in their action column–this is what they will do on that turn. Similarly, neither, one or both may have an entry in their emotion column–this is the emotion they will express. Asterisks in these columns indicate that the action or emotion will be the one that is optimal (least deflecting) according to BayesACT. Exclamation points mean that it is optimal according to affect control theory (Interact). A plus sign after the entry indicates that a small amount of noise will be added to the other party’s perception of the action or emotion.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sally and Reem will take 10 turns using the default specifications: bayesact optimal actions and no emotion expression. A small amount of noise will be added to each person's perception of the other's action--this means that there is a chance actions will be misinterpreted by the observing party. </span></span>
<span><span class="va">eventlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_event_df.html">basic_event_df</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                            actors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sally"</span>, <span class="st">"Reem"</span><span class="op">)</span>, </span>
<span>                            noise <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1_action"</span>, <span class="st">"a2_action"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">eventlist</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">agent</th>
<th align="left">agent_action</th>
<th align="left">agent_emotion</th>
<th align="left">object</th>
<th align="left">object_action</th>
<th align="left">object_emotion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Reem</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Sally</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Reem</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Sally</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Reem</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Sally</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Reem</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Sally</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sally</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Reem</td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Reem</td>
<td align="left">*+</td>
<td align="left"></td>
<td align="left">Sally</td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="writing-input-data-frames-to-file">Writing input data frames to file<a class="anchor" aria-label="anchor" href="#writing-input-data-frames-to-file"></a>
</h3>
<p>Now that we have created the three data frames, we need to generate the text files that the BayesACT C code takes as input. bayesactR provides the <code><a href="../reference/write_input_from_df.html">write_input_from_df()</a></code> function for this purpose. In addition to the three dataframes, this function needs file names for the two text files that it will write. The sim file contains the actor and interaction information, and must have the extension .txt. The event file contains the event information and must have the extension .events. This function also requires the filepath for the directory that houses the BayesACT C package on your machine (see the section on downloading and installing the BayesACT C package below). By default, the function will put the text files it generates in a directory called “bayesact_input” that lives under your current working directory. If you want the files to be saved to a different directory, provide a filepath to the <code>input_dir</code> argument. This function returns the filepath at which it saved the input files.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_input_from_df.html">write_input_from_df</a></span><span class="op">(</span><span class="va">nodelist</span>, <span class="va">edgelist</span>, <span class="va">eventlist</span>, </span>
<span>                    simfilename <span class="op">=</span> <span class="st">"readme_simfile.txt"</span>, </span>
<span>                    eventfilename <span class="op">=</span> <span class="st">"readme_eventfile.events"</span>, </span>
<span>                    bayesact_dir <span class="op">=</span> <span class="st">"/path/to/my/bayesact/Cpackage/top/level/directory/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-bayesact-using-bayesactr">Running BayesACT using bayesactR<a class="anchor" aria-label="anchor" href="#running-bayesact-using-bayesactr"></a>
</h3>
<p>The function used to run simulations is <code><a href="../reference/run_bayesact.html">run_bayesact()</a></code>. It requires the file name we gave the input sim file, the path to the top level directory of the Bayesact C package, the path to the directory where the input files were saved (if something other than “bayesact_input” under the working directory, which is the default), and the path where the output should be saved (“bayesact_output” under the current working directory is the default).</p>
<p>This will probably take a minute or two to run (longer if there are more events).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_bayesact.html">run_bayesact</a></span><span class="op">(</span>simfilename <span class="op">=</span> <span class="st">"readme_simfile.txt"</span>, </span>
<span>             bayesact_dir <span class="op">=</span> <span class="st">"/path/to/my/bayesact/Cpackage/top/level/directory/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="batches-of-simulations">Batches of simulations<a class="anchor" aria-label="anchor" href="#batches-of-simulations"></a>
</h3>
<p>Now that we know how to set up, run, and analyze results from a single situation, we can think about how to efficiently scale up. It is likely that many BayesACT applications will require running simulations over a range of parameter settings, making running batches in a replicable way very useful.</p>
<p>The functions described above are all amenable to being run inside of loops. Notably, it may not be necessary to recreate every dataframe for every run. For example, if a user wants to run a number of simulations where the probability that the actor takes each of their possible identities (<code>agent_ident_prob</code> in the interaction edgelist) varies, only the edgelist needs to be modified. The nodelist and events file can be created once and passed to <code><a href="../reference/write_input_from_df.html">write_input_from_df()</a></code> repeatedly.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># What happens if the probability that Reem sees Sally as a teacher versus a bore varies? Let's run 5 simulations with different values of object_ident_prob to find out.</span></span>
<span><span class="co"># This is defined in the edgelist, so the nodelist and events files can just be created once. This code is the same as used above. </span></span>
<span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blank_nodelist.html">blank_nodelist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Sally"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">us_identity</span>, <span class="va">us_behavior</span>, <span class="va">us_identity</span>, <span class="st">"usfullsurveyor2015"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">nodelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_actor.html">add_actor</a></span><span class="op">(</span><span class="va">nodelist</span>, </span>
<span>                      name <span class="op">=</span> <span class="st">"Reem"</span>, </span>
<span>                      dicts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">egypt_identity</span>, <span class="va">egypt_behavior</span>, <span class="va">egypt_identity</span>, <span class="st">"egypt2015"</span><span class="op">)</span>, </span>
<span>                      eqns <span class="op">=</span> <span class="st">"egypt2014"</span>, eqns_gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"av"</span>, <span class="st">"f"</span><span class="op">)</span>, </span>
<span>                      alphas <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">eventlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/basic_event_df.html">basic_event_df</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">6</span>, </span>
<span>                            actors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sally"</span>, <span class="st">"Reem"</span><span class="op">)</span>, </span>
<span>                            noise <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1_action"</span>, <span class="st">"a2_action"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># We need to create a different edgelist for each of the simulations and write out different input files for each as well. We will do this in a for loop. </span></span>
<span><span class="co"># the list of probabilities of Reem seeing Sally as a teacher that we will loop over</span></span>
<span><span class="va">p_teacher</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">.05</span>, <span class="fl">.95</span>, <span class="fl">.2</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">this_p_teacher</span> <span class="op">&lt;-</span> <span class="va">p_teacher</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="co"># the probabilities of all identities combined must always sum to 1</span></span>
<span>  <span class="va">this_p_bore</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="va">this_p_teacher</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/blank_edgelist.html">blank_edgelist</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_interaction.html">add_interaction</a></span><span class="op">(</span><span class="va">edgelist</span>, </span>
<span>                              agent <span class="op">=</span> <span class="st">"Sally"</span>, object <span class="op">=</span> <span class="st">"Reem"</span>, </span>
<span>                              agent_ident <span class="op">=</span> <span class="st">"teacher"</span>, agent_ident_prob <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                              object_ident <span class="op">=</span> <span class="st">"student"</span>, object_ident_prob <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="va">edgelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_interaction.html">add_interaction</a></span><span class="op">(</span><span class="va">edgelist</span>, </span>
<span>                              agent <span class="op">=</span> <span class="st">"Reem"</span>, object <span class="op">=</span> <span class="st">"Sally"</span>, </span>
<span>                              agent_ident <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"student"</span>, <span class="st">"genius"</span><span class="op">)</span>, agent_ident_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.9</span>, <span class="fl">.1</span><span class="op">)</span>, </span>
<span>                              object_ident <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"teacher"</span>, <span class="st">"bore"</span><span class="op">)</span>, object_ident_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">this_p_teacher</span>, <span class="va">this_p_bore</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># each simulation file needs a different name</span></span>
<span>  <span class="va">simname</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"readme_simfile_batch_"</span>, <span class="va">i</span>, <span class="st">".txt"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># write out input files</span></span>
<span>  <span class="fu"><a href="../reference/write_input_from_df.html">write_input_from_df</a></span><span class="op">(</span><span class="va">nodelist</span>, <span class="va">edgelist</span>, <span class="va">eventlist</span>, </span>
<span>                      simfilename <span class="op">=</span> <span class="va">simname</span>, </span>
<span>                      eventfilename <span class="op">=</span> <span class="st">"readme_eventfile_batch.events"</span>, </span>
<span>                      bayesact_dir <span class="op">=</span> <span class="st">"/path/to/my/bayesact/Cpackage/top/level/directory/"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># run the current simulation</span></span>
<span>  <span class="fu"><a href="../reference/run_bayesact.html">run_bayesact</a></span><span class="op">(</span><span class="va">simname</span>, bayesact_dir <span class="op">=</span> <span class="st">"/path/to/my/bayesact/Cpackage/top/level/directory/"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aidan Combs.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
